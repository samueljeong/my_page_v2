{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Drama Workflow Session",
  "description": "드라마 제작 워크플로우 전체 세션 데이터 - 모든 Step이 공유",
  "type": "object",
  "properties": {
    "sessionId": {
      "type": "string",
      "description": "고유 세션 ID"
    },
    "createdAt": {
      "type": "string",
      "format": "date-time"
    },
    "updatedAt": {
      "type": "string",
      "format": "date-time"
    },
    "category": {
      "type": "string",
      "enum": ["10min", "20min", "30min", "shorts", "mini"],
      "description": "콘텐츠 길이 카테고리"
    },
    "contentType": {
      "type": "string",
      "enum": ["testimony", "drama"],
      "description": "콘텐츠 유형"
    },

    "metadata": {
      "type": "object",
      "description": "YouTube 업로드용 메타데이터 (Step3에서 생성, Step7에서 사용)",
      "properties": {
        "title": {
          "type": "string",
          "maxLength": 100,
          "description": "영상 제목"
        },
        "description": {
          "type": "string",
          "description": "영상 설명"
        },
        "tags": {
          "type": "array",
          "items": { "type": "string" },
          "description": "태그 목록"
        },
        "thumbnail": {
          "type": "object",
          "properties": {
            "prompt": { "type": "string" },
            "url": { "type": "string" }
          }
        }
      }
    },

    "step1": {
      "type": "object",
      "description": "Step1: 주제 선정",
      "properties": {
        "topic": {
          "type": "string",
          "description": "선정된 주제"
        },
        "mainCharacter": {
          "type": "string",
          "description": "주인공 정보"
        },
        "benchmark": {
          "type": "object",
          "properties": {
            "title": { "type": "string" },
            "url": { "type": "string" },
            "script": { "type": "string" },
            "analysis": { "type": "string" }
          }
        }
      }
    },

    "step2": {
      "type": "object",
      "description": "Step2: 세부 설정 (처리 단계)",
      "properties": {
        "character": {
          "type": "object",
          "description": "캐릭터 설정 결과"
        },
        "storyline": {
          "type": "object",
          "description": "스토리라인 결과"
        },
        "scene": {
          "type": "object",
          "description": "장면 구성 결과"
        },
        "dialogue": {
          "type": "object",
          "description": "대사 작성 결과"
        }
      }
    },

    "step3": {
      "type": "object",
      "description": "Step3: 대본 생성",
      "properties": {
        "guide": {
          "type": "string",
          "description": "축적된 지침"
        },
        "script": {
          "type": "string",
          "description": "완성된 대본"
        },
        "scenes": {
          "type": "array",
          "description": "파싱된 장면 목록",
          "items": {
            "type": "object",
            "properties": {
              "id": { "type": "integer" },
              "title": { "type": "string" },
              "content": { "type": "string" },
              "narration": { "type": "string" },
              "dialogue": { "type": "array" }
            }
          }
        }
      }
    },

    "step4": {
      "type": "object",
      "description": "Step4: 장면 이미지",
      "properties": {
        "provider": {
          "type": "string",
          "enum": ["flux", "dalle"],
          "description": "이미지 생성 모델"
        },
        "aspectRatio": {
          "type": "string",
          "enum": ["16:9", "9:16", "1:1"]
        },
        "images": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "sceneId": { "type": "integer" },
              "prompt": { "type": "string" },
              "url": { "type": "string" },
              "generatedAt": { "type": "string", "format": "date-time" }
            }
          }
        }
      }
    },

    "step5": {
      "type": "object",
      "description": "Step5: 음성 생성",
      "properties": {
        "provider": {
          "type": "string",
          "enum": ["google", "naver"],
          "description": "TTS 제공자"
        },
        "voices": {
          "type": "object",
          "description": "역할별 음성 설정",
          "properties": {
            "narrator": { "type": "string" },
            "male": { "type": "string" },
            "female": { "type": "string" }
          }
        },
        "audioFiles": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "sceneId": { "type": "integer" },
              "type": { "type": "string", "enum": ["narration", "dialogue"] },
              "text": { "type": "string" },
              "url": { "type": "string" },
              "duration": { "type": "number" }
            }
          }
        }
      }
    },

    "step6": {
      "type": "object",
      "description": "Step6: 영상 편집",
      "properties": {
        "videoUrl": {
          "type": "string",
          "description": "생성된 영상 URL"
        },
        "duration": {
          "type": "string",
          "description": "영상 길이 (MM:SS)"
        },
        "format": {
          "type": "string",
          "enum": ["mp4", "webm"]
        }
      }
    },

    "step7": {
      "type": "object",
      "description": "Step7: YouTube 업로드",
      "properties": {
        "status": {
          "type": "string",
          "enum": ["draft", "scheduled", "published"],
          "description": "업로드 상태"
        },
        "youtubeId": {
          "type": "string",
          "description": "YouTube 영상 ID"
        },
        "youtubeUrl": {
          "type": "string",
          "description": "YouTube 영상 URL"
        },
        "scheduledAt": {
          "type": "string",
          "format": "date-time",
          "description": "예약 공개 시간"
        },
        "publishedAt": {
          "type": "string",
          "format": "date-time",
          "description": "실제 공개 시간"
        }
      }
    }
  }
}
