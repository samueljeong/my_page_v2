{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Step5 YouTube Upload Schema",
  "description": "Step5 YouTube 업로드 결과 JSON 스키마",
  "type": "object",
  "required": ["metadata", "video_metadata", "upload_status"],

  "properties": {
    "metadata": {
      "type": "object",
      "required": ["script_id", "channel_id"],
      "properties": {
        "script_id": {"type": "string"},
        "channel_id": {"type": "string"},
        "channel_name": {"type": "string"},
        "category": {"type": "string"},
        "created_at": {"type": "string", "format": "date-time"}
      }
    },

    "video_metadata": {
      "type": "object",
      "required": ["title", "description"],
      "properties": {
        "title": {
          "type": "string",
          "maxLength": 100,
          "description": "YouTube 영상 제목"
        },
        "description": {
          "type": "string",
          "maxLength": 5000,
          "description": "YouTube 영상 설명"
        },
        "tags": {
          "type": "array",
          "items": {"type": "string"},
          "maxItems": 30
        },
        "category_id": {
          "type": "string",
          "description": "YouTube 카테고리 ID (22: People & Blogs)"
        },
        "privacy_status": {
          "type": "string",
          "enum": ["public", "private", "unlisted"],
          "default": "private"
        },
        "made_for_kids": {"type": "boolean", "default": false},
        "language": {"type": "string", "default": "ko"},
        "default_audio_language": {"type": "string", "default": "ko"}
      }
    },

    "thumbnail": {
      "type": "object",
      "properties": {
        "source": {"type": "string", "enum": ["auto", "custom", "scene"]},
        "image_url": {"type": "string"},
        "local_path": {"type": "string"},
        "uploaded": {"type": "boolean"}
      }
    },

    "schedule": {
      "type": "object",
      "properties": {
        "enabled": {"type": "boolean", "default": false},
        "publish_at": {"type": "string", "format": "date-time"},
        "timezone": {"type": "string", "default": "Asia/Seoul"},
        "optimal_time_slot": {
          "type": "string",
          "description": "최적 업로드 시간대 (예: morning, afternoon, evening)"
        }
      }
    },

    "upload_status": {
      "type": "object",
      "required": ["status"],
      "properties": {
        "status": {
          "type": "string",
          "enum": ["pending", "uploading", "processing", "completed", "failed", "scheduled"]
        },
        "progress_percent": {"type": "integer", "minimum": 0, "maximum": 100},
        "started_at": {"type": "string", "format": "date-time"},
        "completed_at": {"type": "string", "format": "date-time"},
        "error": {"type": "string"},
        "retry_count": {"type": "integer", "default": 0}
      }
    },

    "result": {
      "type": "object",
      "properties": {
        "video_id": {"type": "string"},
        "video_url": {"type": "string", "format": "uri"},
        "embed_url": {"type": "string", "format": "uri"},
        "channel_url": {"type": "string", "format": "uri"},
        "published_at": {"type": "string", "format": "date-time"}
      }
    },

    "analytics_tracking": {
      "type": "object",
      "properties": {
        "track_views": {"type": "boolean", "default": true},
        "track_engagement": {"type": "boolean", "default": true},
        "notification_threshold": {
          "type": "object",
          "properties": {
            "views": {"type": "integer"},
            "likes": {"type": "integer"},
            "comments": {"type": "integer"}
          }
        }
      }
    }
  }
}
